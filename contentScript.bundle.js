(()=>{"use strict";var e="usage",t="limit",n="replai_so_usage",r="replai_so_limit",i=function(){function i(){}return i.setLocalStorage=function(e){var t=e.limit,i=e.usage;t&&localStorage.setItem(r,t.toString()),i&&localStorage.setItem(n,i.toString())},i.getLocalStorage=function(){var e=localStorage.getItem(r),t=localStorage.getItem(n);return{limit:e?parseInt(e):void 0,usage:t?parseInt(t):void 0}},i.getSyncStorage=function(){return new Promise((function(n){chrome.storage.sync.get([e,t],(function(r){n({usage:null==r?void 0:r[e],limit:null==r?void 0:r[t]})}))}))},i.getSyncStorageCustom=function(e){return new Promise((function(t){chrome.storage.sync.get(e,(function(e){t(e)}))}))},i.setSyncStorage=function(n,r){var i,o=n.limit,a=n.usage;chrome.storage.sync.set(((i={})[e]=a,i[t]=o,i),(function(){r&&r()}))},i}();function o(){return e=this,t=void 0,r=function(){var e;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(t){switch(t.label){case 0:return[4,chrome.storage.local.get(["replai_jwt_token","jwt_token"])];case 1:return void 0!==(e=t.sent()).replai_jwt_token||void 0!==e.jwt_token?[2,e.replai_jwt_token||e.jwt_token]:[2,null]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}));var e,t,n,r}var a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},s=function(){function e(){}var t;return t=e,e.getUsageLimits=function(){return a(void 0,void 0,void 0,(function(){return l(t,(function(e){return[2,new Promise((function(e,t){return a(void 0,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,o()];case 1:return n=r.sent(),chrome.runtime.sendMessage({message:"getUsageLimits",body:{token:n}},(function(n){chrome.runtime.lastError?t(new Error(chrome.runtime.lastError.message)):(console.log("RESPONSE from UsageLimitsBackend",n),e(n))})),[2]}}))}))}))]}))}))},e}(),u=function(){var e,t,n=document.querySelector('[data-testid="SideNav_AccountSwitcher_Button"]');return n?null===(t=null===(e=null==n?void 0:n.innerText)||void 0===e?void 0:e.split("@"))||void 0===t?void 0:t[1]:""};function c(){function e(t){var n=[];for(t=t.firstChild;t;t=t.nextSibling)3==t.nodeType?n.push(t):n=n.concat(e(t));return n}var t=document.querySelector('[aria-labelledby="modal-header"]'),n=null;if(t=t?t.querySelector('[data-testid="tweetText"]')||t.querySelector('[data-testid="tweet"]'):null)n=e(t);else{var r=document.querySelectorAll('[data-testid="tweetText"]'),i=Array.from(r).filter((function(e){var t=getComputedStyle(e);return parseInt(t.fontSize)>=17}));i.length>0&&(n=e(i[0]))}return n?n.map((function(e){return e.data})).join(" ").trim():""}function d(e,t,n){var r=document.createElement("div");return r.innerHTML=e,r.classList.add("replaiso-btn-style"),r.addEventListener("click",(function(e){n(e,t)})),r}var p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},v="REPLAI_BUTTONS",g="REPLAI_USAGE",h="REPLAI_LIMIT",y="REPLAI_LINK";function b(e){if("twitter"===e)return document.querySelector('[data-testid="toolBar"]');if("linkedin"===e)return(t=document.querySelectorAll("form.comments-comment-box__form")).length?Array.from(t):null;if("producthunt"===e){var t=document.querySelectorAll('textarea[placeholder*="Write a reply"]'),n=document.querySelectorAll('textarea[placeholder^="Reply to"]'),r=document.querySelector('textarea[placeholder="What do you think?"]'),i=t.length?Array.from(t):[];return r&&i.push(r),n.length&&(i=i.concat(Array.from(n))),i.map((function(e){var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.parentNode}))}return"gmail"===e?document.querySelector('div[aria-label="Message Body"]')||document.querySelector('div[aria-multiline="true"][contenteditable="true"][role="textbox"]'):null}var S=function(e,t){var n=this;this.getEmbeddedButtons=function(){if("twitter"===n.siteEmbed||"gmail"===n.siteEmbed)return document.getElementById(v)||null;if("linkedin"===n.siteEmbed){var e=b(n.siteEmbed),t=[];return null==e||e.forEach((function(e){var n=e.querySelector(".".concat(v));n&&t.push(n)})),t}if("producthunt"===n.siteEmbed){e=b(n.siteEmbed);var r=[];return null==e||e.forEach((function(e){var t=e.querySelector(".".concat(v));t&&r.push(t)})),r}return null},this.addLoading=function(){var e=function(e){if(!e)return null;e.style.opacity="0.6",e.style.pointerEvents="none"},t=n.getEmbeddedButtons();Array.isArray(t)?t.forEach((function(t){return e(t)})):e(t)},this.removeLoading=function(){var e=function(e){if(!e)return null;e.style.opacity="1",e.style.pointerEvents="auto"},t=n.getEmbeddedButtons();Array.isArray(t)?t.forEach((function(t){return e(t)})):e(t)},this.appendButtonsInContainer=function(e){var t,r,i,o,a,l,s=function(e){var t=d("👍","positive",e),n=d("👎","disagree",e),r=d("🙏 Support","support",e),i=d("🔥 Joke","joke",e),o=d("💡 Idea","idea",e),a=d("❓ Question","question",e);t.style.padding="3px 12px",n.style.padding="3px 12px";var l=document.createElement("div");l.id=v,l.className=v,l.style="display: flex; flex-wrap: wrap; align-items: center; height: 100%; margin-top: 8px;";var s=document.createElement("div");return s.innerHTML='<a href="https://app.replai.so/offer"  id="'.concat(y,'"  target="_blank" rel="noopener noreferrer" class="').concat(y,' replaiso-limit-container-style"><span class="').concat(g,'" id="').concat(g,'">').concat(0,'</span>/<span class="').concat(h,'" id="').concat(h,'">').concat(20,'</span> replies<br/><span style="text-decoration: underline">Get more</span></a>'),s.classList.add("replaiso-limit-label-style"),l.appendChild(t),l.appendChild(r),l.appendChild(i),l.appendChild(o),l.appendChild(a),l.appendChild(s),l}((function(t,r){var i;if("twitter"===n.siteEmbed)(o=c())&&n.sendServerRequest(o,r);else if("linkedin"===n.siteEmbed){var o=function(e){return e.closest(".feed-shared-update-v2").querySelector(".feed-shared-update-v2__description").textContent.trim().replaceAll("\n","").replaceAll("…see more","")}(t.target),a=function(e){var t,n,r,i=null===(r=null===(n=null===(t=e.closest(".feed-shared-update-v2"))||void 0===t?void 0:t.querySelector(".update-components-actor__name"))||void 0===n?void 0:n.querySelector("span"))||void 0===r?void 0:r.textContent;return console.log("text",i),i}(t.target),l=function(e){var t,n,r,i=null===(r=null===(n=null===(t=e.closest(".feed-shared-update-v2"))||void 0===t?void 0:t.querySelector(".update-components-actor__description"))||void 0===n?void 0:n.querySelector("span"))||void 0===r?void 0:r.textContent;return console.log("getLinkedinTitle",i),i}(t.target),s=function(e){var t,n,r=null===(n=null===(t=e.closest(".feed-shared-update-v2"))||void 0===t?void 0:t.querySelector("a.update-components-actor__meta-link"))||void 0===n?void 0:n.getAttribute("href");return console.log("getLinkedinProfileUrl",r),r}(t.target),u=e.querySelector(".ql-editor");o&&n.sendServerRequest(o,r,u,{name:a,title:l,profileUrl:s})}else"producthunt"===n.siteEmbed?(o=function(e){var t,n,r,i,o,a,l,s=null===(t=e.closest("form"))||void 0===t?void 0:t.parentNode;console.log("el",s);var u="";if("comments"===(null===(n=null==s?void 0:s.parentNode)||void 0===n?void 0:n.id))u=function(){var e,t,n,r=null===(e=document.querySelectorAll("h1")[0])||void 0===e?void 0:e.textContent,i=null===(t=document.querySelector("h2"))||void 0===t?void 0:t.textContent,o=null===(n=document.querySelector('div[class^="styles_htmlText"]'))||void 0===n?void 0:n.textContent;return"This a product description on ProductHunt website: \"Product name: '".concat(r,"', description: '").concat(i,". ").concat(o,"'\". Generate a comment").replaceAll("\n"," ")}();else if(null==s?void 0:s.querySelector('form[data-test="comment-form"]')){var c=s.parentNode.querySelector("h1").textContent,d=null===(o=null===(i=null===(r=s.parentNode.querySelectorAll(":scope > div"))||void 0===r?void 0:r[1])||void 0===i?void 0:i.textContent)||void 0===o?void 0:o.replaceAll("\n"," ").trim();u='This is a discussion on ProductHunt: "'.concat(c,":  ").concat(d,'". Reply to it')}else u="This is a comment on ProductHunt: ".concat(null===(l=null===(a=null==s?void 0:s.firstChild)||void 0===a?void 0:a.textContent)||void 0===l?void 0:l.replaceAll("\n","").trim(),". Reply to it");return u}(t.target),u=e.querySelector("textarea"),o&&n.sendServerRequest(o,r,u)):"gmail"===n.siteEmbed&&(o=(i=document.querySelectorAll('div[aria-expanded="true"]'))[i.length-1].querySelector("div[data-message-id]").querySelector(":scope> div:nth-child(2)").lastChild.textContent.replaceAll("\n",""))&&n.sendServerRequest(o,r)}));if("twitter"===n.siteEmbed)null===(t=null==e?void 0:e.firstElementChild)||void 0===t||(t.style.marginTop="12px"),null===(r=null==e?void 0:e.lastElementChild)||void 0===r||(r.style.marginTop="12px"),null===(i=null==e?void 0:e.parentNode)||void 0===i||i.prepend(s);else if("linkedin"===n.siteEmbed)e.appendChild(s);else if("producthunt"===n.siteEmbed)null==s||(s.style.paddingTop="10px"),null==s||(s.style.marginBottom="-6px"),e.appendChild(s);else if("gmail"===n.siteEmbed){var u=document.createElement("tr"),p=document.createElement("td");p.style.paddingLeft="16px",p.style.paddingRight="16px",p.appendChild(s),u.appendChild(p);var f=null===(l=null===(a=null===(o=null==e?void 0:e.parentNode)||void 0===o?void 0:o.closest("tbody"))||void 0===a?void 0:a.parentNode)||void 0===l?void 0:l.closest("tbody");f&&f.insertBefore(u,null==f?void 0:f.lastChild)}},this.init=function(){if("twitter"===n.siteEmbed){if(n.getEmbeddedButtons())return;if(!c())return;var e=b(n.siteEmbed);if(!e)return void requestAnimationFrame(n.init);n.appendButtonsInContainer(e),n.validateLimitAndUsage()}else if("linkedin"===n.siteEmbed){var t=b(n.siteEmbed);if(!Array.isArray(t))return;t.forEach((function(e){e.querySelector(".".concat(v))||(n.appendButtonsInContainer(e),n.validateLimitAndUsage())}))}else if("producthunt"===n.siteEmbed){var r=b(n.siteEmbed);if(!Array.isArray(r))return;r.forEach((function(e){e.querySelector(".".concat(v))||(n.appendButtonsInContainer(e),n.validateLimitAndUsage())}))}},this.pasteInInput=function(e,t){if("twitter"===n.siteEmbed){var r=document.querySelector('[data-testid="tweetTextarea_0"]'),i=new DataTransfer;i.setData("text/plain",e),null==r||r.dispatchEvent(new ClipboardEvent("paste",{dataType:"text/plain",data:e,bubbles:!0,clipboardData:i,cancelable:!0}))}else if(t&&"linkedin"===n.siteEmbed)t.innerHTML="<p>"+e+"</p>";else if("gmail"===n.siteEmbed){var o=b(n.siteEmbed);null==o||(o.innerHTML=e)}else if("producthunt"===n.siteEmbed){r=t,Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(r,(null==r?void 0:r.value)?(null==r?void 0:r.value)+""+e:e);var a=new Event("input",{bubbles:!0});r.dispatchEvent(a)}},this.sendServerRequest=function(e,t,r,a){return f(n,void 0,void 0,(function(){var n,l,c,d,f,v,g,h,y=this;return m(this,(function(m){switch(m.label){case 0:return this.addLoading(),this.isOldScenario?[4,i.getSyncStorage()]:[3,2];case 1:return c=m.sent(),n=c.usage,l=c.limit,[3,4];case 2:return[4,s.getUsageLimits()];case 3:d=m.sent(),n=d.usage,l=d.limit,m.label=4;case 4:return[4,i.getSyncStorageCustom(["type","saleTimestamp"])];case 5:return f=m.sent(),v=f.type,g=f.saleTimestamp,[4,o()];case 6:return h=m.sent(),chrome.runtime.sendMessage({message:this.isOldScenario?"replai-old":"replai",body:p(p({text:e,style:t,name:u(),saleTimestamp:g,subscription:v,usage:n,limit:l,site:this.siteEmbed},a),h?{token:h}:{})},(function(e){if(console.log("RESPONSE",e),e.error&&"Unauthorized"===e.error||"User not found"===e.error)window.open("https://app.replai.so/signin?clear=true","_blank");else{var t=e.text;y.pasteInInput(t,r),y.removeLoading(),y.isOldScenario?y.updateUsage():y.validateLimitAndUsage()}})),console.log("SEND MESSAGE END"),[2]}}))}))},this.updateUsage=function(){return f(n,void 0,void 0,(function(){var e,t;return m(this,(function(n){switch(n.label){case 0:return this.isOldScenario?[4,i.getSyncStorage()]:[3,3];case 1:return e=n.sent().usage,t=e+1,[4,i.setSyncStorage({usage:t})];case 2:return n.sent(),i.setSyncStorage({usage:t}),[3,5];case 3:return[4,fetch("/increaseUsageLimit")];case 4:n.sent(),n.label=5;case 5:return[4,this.validateLimitAndUsage()];case 6:return n.sent(),[2]}}))}))},this.validateLimitAndUsage=function(){return f(n,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.addUsageAndLimitForFirstTime()];case 1:return e.sent(),[4,this.updateLimitAndUsageTexts()];case 2:return e.sent(),[4,this.checkLimitAndDisableButtonsIfExceeds()];case 3:return e.sent(),[2]}}))}))},this.addUsageAndLimitForFirstTime=function(){return f(n,void 0,void 0,(function(){var e,t,n,r,o,a;return m(this,(function(l){switch(l.label){case 0:return this.isOldScenario?[4,i.getSyncStorage()]:[3,5];case 1:return e=l.sent(),t=e.usage,n=e.limit,void 0!==t&&void 0!==n?[3,5]:(r=i.getLocalStorage(),o=r.usage,a=r.limit,void 0!==o||void 0!==a?[3,3]:[4,i.setSyncStorage({usage:0,limit:20})]);case 2:return l.sent(),[3,5];case 3:return[4,i.setSyncStorage({usage:o,limit:a})];case 4:l.sent(),l.label=5;case 5:return[2]}}))}))},this.updateLimitAndUsageTexts=function(){return f(n,void 0,void 0,(function(){var e,t,n,r,o,a,l,u;return m(this,(function(c){switch(c.label){case 0:return this.isOldScenario?[4,i.getSyncStorage()]:[3,2];case 1:return n=c.sent(),e=n.usage,t=n.limit,[3,4];case 2:return[4,s.getUsageLimits()];case 3:r=c.sent(),e=r.usage,t=r.limit,c.label=4;case 4:return o=document.getElementById(h),a=document.getElementById(g),l=function(n,r){null!=e&&null!=t&&n&&r&&(n.innerText="".concat(t),r.innerText="".concat(e))},u=this.getEmbeddedButtons(),Array.isArray(u)?u.forEach((function(e){var t=e.querySelector(".".concat(h)),n=e.querySelector(".".concat(g));l(t,n)})):l(o,a),[2]}}))}))},this.checkLimitAndDisableButtonsIfExceeds=function(){return f(n,void 0,void 0,(function(){var e,t,n,r,o,a,l=this;return m(this,(function(u){switch(u.label){case 0:return this.isOldScenario?[4,i.getSyncStorage()]:[3,2];case 1:return n=u.sent(),e=n.usage,t=n.limit,void 0!==e&&void 0!==t&&i.setLocalStorage({usage:e,limit:t}),[3,4];case 2:return[4,s.getUsageLimits()];case 3:r=u.sent(),e=r.usage,t=r.limit,u.label=4;case 4:return e>=t&&(o=function(e){if(!e)return null;e.childNodes.forEach((function(t,n){if(t.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation(),setTimeout((function(){l.removeLoading()}),200),window.open("https://app.replai.so/offer","_blank")})),e.childNodes.length-1===n)return null;t.style.opacity="0.5"}),!0);var t=document.getElementById(y);document.getElementById(h),null==t||(t.style.fontWeight="500"),null==t||t.addEventListener("click",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),window.open("https://app.replai.so/offer","_blank")}),!0)},a=this.getEmbeddedButtons(),Array.isArray(a)?a.forEach((function(e){return o(e)})):o(a)),[2]}}))}))},this.isOldScenario=t,this.siteEmbed=e};const E=function(){const e=window.location.href,t=e.includes("twitter.com")||e.includes("x.com"),n=e.includes("linkedin.com"),r=e.includes("mail.google.com"),i=e.includes("producthunt.com"),o=e.includes("app.replai.so")||e.includes("localhost:3001");return t?"twitter":n?"linkedin":r?"gmail":i?"producthunt":o?"replai":null}();if("replai"===E){async function w(){let e=localStorage.getItem("replai_jwt_token");if(e||(e=localStorage.getItem("jwt_token")),e){await chrome.storage.local.set({replai_jwt_token:e});const{limit:t,usage:n}=await i.getSyncStorage();console.log("limit before MigrateUsageLimit",t),console.log("usage before MigrateUsageLimit",n),chrome.runtime.sendMessage({message:"migrateUsageLimit",body:{token:e,limit:t,usage:n}},(e=>{console.log("RESPONSE from MigrateUsageLimit",e)}))}else setTimeout(w,200)}w()}else(async()=>{const e=await o(),t=new S(E,!e);setInterval(t.init,100)})()})();